<!-- _layouts/default.html -->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>{{ page.title | default: site.title }}</title>
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/favicon.png" />
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/apple-touch-icon.png" />
  <link rel="stylesheet" href="/assets/css/styles.css" />
  <meta name="theme-color" content="#FE9900" />

  <!-- PWA: Manifest -->
<link rel="manifest" href="/manifest.webmanifest">

<!-- PWA: Theme color -->
<meta name="theme-color" content="#1f2933">

<!-- Android app-like experience -->
<meta name="mobile-web-app-capable" content="yes">
<meta name="application-name" content="Reliable Store India">

<!-- iOS (optional but good) -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<meta name="apple-mobile-web-app-title" content="Reliable Store India">
<link rel="apple-touch-icon" href="/icons/icon-192.png">

</head>
<body>
  {% include header.html %}

  <main>
    {{ content }}
  </main>

  {% include footer.html %}

  <!-- lightweight page behaviour -->
  <script>
    // sticky header shadow on scroll
    (function(){
      const bar = document.querySelector('.site-topbar');
      if (!bar) return;
      const onScroll = () => {
        if (window.scrollY > 12) bar.classList.add('scrolled');
        else bar.classList.remove('scrolled');
      };
      document.addEventListener('scroll', onScroll, {passive:true});
      onScroll();
    })();
  </script>

  <!-- Supabase client + header behaviour -->
  <script type="module" src="/assets/js/supabase_client.js"></script>
  <script type="module" src="/assets/js/site_header.js"></script>

  <script>
  if ("serviceWorker" in navigator) {
    window.addEventListener("load", function () {
      navigator.serviceWorker
        .register("/service-worker.js")
        .then(function (registration) {
          console.log("ServiceWorker registration successful with scope: ", registration.scope);
        })
        .catch(function (error) {
          console.log("ServiceWorker registration failed:", error);
        });
    });
  }
</script>

</body>
</html>
